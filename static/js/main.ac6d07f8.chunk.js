(this["webpackJsonppdf-field-detection-ui"]=this["webpackJsonppdf-field-detection-ui"]||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(7),r=n.n(i),o=(n(38),n(39),n(40),n(56)),s=n(55),l=n(53),u=n(52),d=n(32),p=n(5),f=function(){return Object(p.jsxs)(o.a,{fixed:"top",bg:"primary",variant:"dark",children:[Object(p.jsxs)(o.a.Brand,{children:[Object(p.jsx)("img",{src:"pdf-icon.png",width:"30",height:"30",className:"d-inline-block align-top",alt:"Auto Detect PDF Fields"})," ","Auto Detect PDF Fields"]}),Object(p.jsx)(o.a.Collapse,{className:"justify-content-end",children:Object(p.jsx)(s.a,{className:"me-auto",children:Object(p.jsx)(s.a.Link,{href:"https://github.com/chengliwang/pdf-field-detection-ui",target:"_blank",children:Object(p.jsx)(l.a,{placement:"bottom",overlay:Object(p.jsx)(u.a,{children:"Github"}),children:Object(p.jsx)(d.a,{size:"24"})},"bottom")})})})]})},j=n(26),b=n(54),h=n(57),v=n(31),O=n.n(v),g=n(18),m=n.n(g),x=n(29),w=function(e){var t="download.pdf";try{t=e.split(";")[1].split("=")[1].trim()}catch(n){console.log(n)}return t};function S(){return(S=Object(x.a)(m.a.mark((function e(t,n){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("pdf",n),e.next=5,fetch("".concat(t,"/v1/predict"),{method:"POST",body:a}).then((function(e){return e.json().then((function(t){return{status:e.status,response:t}}))}));case 5:return c=e.sent,e.next=8,c;case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function F(){return(F=Object(x.a)(m.a.mark((function e(t,n,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t).concat(n,"/").concat(a),{method:"GET"}).then((function(e){return"application/json"===e.headers.get("Content-Type")?e.json():{state:"SUCCESS",filename:w(e.headers.get("content-disposition")||""),blob:e.blob()}}));case 3:return c=e.sent,e.next=6,c;case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var y=function(){Object(a.useEffect)((function(){O.a.init()}),[]);var e,t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(0),o=Object(j.a)(r,2),s=o[0],l=o[1],u=Object(a.useState)(""),d=Object(j.a)(u,2),f=d[0],v=d[1],g=!1,m="http://pdf-field-detection-svc.eastus2.azurecontainer.io",x=function(t,n){(function(e,t,n){return F.apply(this,arguments)})(m,t,n).then((function(t){if("SUCCESS"===t.state)clearInterval(e),g||(c=t,l(100),v("Saving the file ..."),c.blob.then((function(e){var t=new Blob([e],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t);else{var n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=c.filename.replace(" ",""),a.click(),setTimeout((function(){window.URL.revokeObjectURL(n)}),250)}i(!1),l(0)})),g=!0);else if("PROGRESS"===t.state){v(t.info);var n=t.info;if(n.match(/Removing password/i))l(5);else if(n.match(/Get.*prediction/i))l(95);else{var a=/Extracting page (\d+) of (\d+)/i.exec(n);null!=a&&l(s+90*parseInt(a[1])/parseInt(a[2]))}}else"FAILURE"===t.state&&(clearInterval(e),v(t.info));var c}))};return Object(p.jsxs)("div",{children:[Object(p.jsx)(b.a,{style:{width:"50%"},children:Object(p.jsxs)(b.a.Group,{controlId:"uploadPdf",children:[Object(p.jsx)(b.a.Label,{children:"Detecting form fields in a PDF using machine learning."}),Object(p.jsx)(b.a.File,{type:"file",accept:"application/pdf",label:"","data-browse":"Upload PDF File",custom:!0,onChange:function(t){g=!1;var n=t.target.files[0];n&&(i(!0),l(0),v("Uploading "+n.name+" ...."),function(e,t){return S.apply(this,arguments)}(m,n).then((function(t){202===(null===t||void 0===t?void 0:t.status)?(l(3),e=setInterval((function(){x(t.response.url,t.response.task_id)}),200)):v("Error uploading PDF: status code "+(null===t||void 0===t?void 0:t.status))})))}})]})}),c?Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:f}),Object(p.jsx)(h.a,{animated:!0,now:s,label:"".concat(Math.round(s),"%")})]}):Object(p.jsx)("div",{})]})};var k=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(f,{}),Object(p.jsx)(y,{})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root")),C()}},[[47,1,2]]]);
//# sourceMappingURL=main.ac6d07f8.chunk.js.map